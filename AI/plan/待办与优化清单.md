# 待办与优化清单（审查版）

## 当前已实现功能概览
- 素材库：导入图片/视频、搜索、筛选、收藏/评分/标签、批量操作、列表预览。
- 预览与壁纸：图片壁纸设置（含屏幕选择）、视频预览、视频壁纸（多屏播放）。
- 相册：新建/删除、相册详情、添加素材/移出素材。
- 规则：基础规则数据与简单编辑（启用/优先级/范围）。
- 设置：开机自启、菜单栏开关、低功耗、主题色、主题模式。
- 菜单栏：显示主窗口、停止视频壁纸、退出。

---

## 一、稳定性与体验优化（优先级高）
1. **视频壁纸外接屏显示可靠性**
   - 优化窗口层级/空间策略与屏幕坐标处理，确保外接屏稳定显示。
   - 监控屏幕插拔与分辨率变化，自动重建视频壁纸窗口。

2. **安全权限流程优化**
   - 统一权限检查与提示入口。
   - 失败时给出“重新授权/重新选择文件”按钮。

3. **预览性能优化**
   - 缩略图缓存（磁盘+内存）。
   - 图片大文件预览时的解码优化（缩放后解码）。

4. **视频播放稳定性**
   - AVPlayer 资源释放与循环播放稳定性。
   - 切换视频时避免短暂黑屏。

---

## 二、功能增强（优先级中）
1. **规则系统完整落地**
   - 时间/日期/工作日规则。
   - 随机策略、避免重复。
   - 多屏规则（每个屏幕不同相册/规则）。

2. **相册增强**
   - 自定义封面、排序方式。
   - 智能相册（按标签/分辨率/收藏自动更新）。

3. **素材库增强**
   - 网格视图切换。
   - 拖拽排序与分组。
   - 批量删除确认弹窗。

4. **设置增强**
   - 缓存管理与一键清理。
   - “低功耗模式”联动视频壁纸（帧率限制/暂停）。

---

## 三、进阶功能（优先级低）
1. **自动下载/在线图库接入**（可选）
   - 接入公开图库或自定义 API。

2. **iCloud 同步**
   - 素材元数据与相册同步。

3. **统计与历史记录**
   - 最近使用壁纸、失败日志、使用频率统计。

4. **快捷键支持**
   - 下一张/上一张/暂停视频壁纸。

---

## 四、工程化与发布
1. **CI/CD 完整流程**
   - GitHub Actions 自动打包 DMG 已完成。
   - 可加签名与公证（Notarization）。

2. **日志体系**
   - 从 NSLog 升级为统一日志模块（可导出日志）。

---

## 建议优先顺序
1. 视频壁纸外接屏稳定性 + 权限流程
2. 规则系统完整落地
3. 素材库网格/缓存优化
4. 其它增强功能

---

请你审查后告诉我：
- 要优先做哪些
- 可以暂缓哪些
- 是否需要拆分为阶段计划
